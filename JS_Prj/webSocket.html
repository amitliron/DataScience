<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket demo</title>

        <script>
            
        </script>


    </head>
    <body>

        <table>
                <tr>
                    <td> <label>First Name:</label> </td>
                    <td> <input type="text" value="first" id="fname">  </td>
                </tr>
                <tr>
                    <td> <label>Last Name:</label>  </td>
                    <td> <input type="text" value="last" id="lname">  </td>
                </tr>
                <tr>    
                    <td> <label>Age:</label>   </td> 
                    <td> <input type="text" value="30" id="age"> </td>
                </tr>
                <tr> 
                    <td>  <label>Sex:</label> </td> 
                    <td>  <input type="text" value="male" id="sex"> </td> 
                </tr>    
                <tr> 
                    <td>  <label>Income:</label> </td>  
                    <td>  <input type="text" value="10000" id="income">  </td>
                </tr>
        </table>

        <label>Num Of Records:</label>    <label text="0" id="status">  <br>

        <button onclick="myFunction()">Click me</button>


        <script>

            

            function myFunction() {
                console.log("Click me button pressed");        

                var msg = {
                    FIRST_NAME: document.getElementById("fname").value,
                    LAST_NAME:  document.getElementById("lname").value,
                    AGE:        document.getElementById("age").value,
                    SEX:        document.getElementById("sex").value,
                    INCOME:     document.getElementById("income").value,
                };


                var ws = new WebSocket("ws://localhost:8765/")                        
                ws.onopen = function(e) {  
                    document.getElementById('status').innerHTML = "Waiting..."              
                    console.log("Sending to server");
                    ws.send(JSON.stringify(msg));
                    //ws.send(msg);
                };  
                ws.onmessage = function (event) {                    
                    document.getElementById('status').innerHTML = event.data
                }              
            }


           
        </script>
    </body>
</html>